Great, I’ll dig into how Heron Data uses the Plaid Assets report to generate underwriting models specifically for professional development merchants—those offering online courses and mentoring. I’ll focus on how they evaluate cash flow, debt servicing, chargebacks/refunds, and reserves, and how you can replicate that approach using your own Plaid integration.

I’ll get back to you with a detailed breakdown of their methodology and insights you can apply to your own underwriting system.

# Replicating Heron Data’s Underwriting Model for Online Course Merchants using Plaid Assets

**Introduction:** Underwriting small merchants in the professional development space (e.g. online course and mentoring providers) requires a deep analysis of their cash flows and financial health, especially since they may lack extensive credit history. Heron Data’s approach is to leverage bank account data (via Plaid) to **automate cash-flow based underwriting**. In Heron’s system, every bank transaction is enriched with a category (for example, labeled as *“Revenue”* or *“Debt Investment”*) and then aggregated to produce insights into the business’s finances ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=Heron%20Data%E2%80%99s%20main%20use%20case,give%20insights%20into%20the%20company)). This allows underwriters to **evaluate a company’s revenue streams, expenses, debt, and risk flags at a glance**, instead of poring over statements manually. Heron’s platform was designed to *“speed up underwriting by an order of magnitude”* and even catch issues like loan stacking (multiple concurrent loans) that traditional methods might miss ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=1,other%20previously%20unidentified%20risk%20factors)). For an online course or coaching business, this data-driven approach means factors like irregular income from course launches, refund rates from dissatisfied students, or limited cash reserves can be quantitatively assessed in the underwriting process.

 ([image]()) *Data flow from Plaid Assets to underwriting metrics (modeled after Heron Data's process). Plaid provides the raw financial data, which is then enriched and analyzed to produce key risk metrics for decisions.*  

In this guide, we will explain **how Heron Data processes Plaid financial data to evaluate risk and financial health** along four key dimensions – **cash flow analysis**, **debt servicing capacity**, **chargeback/refund patterns**, and **reserve levels (liquidity)** – and outline how you can replicate this using your own Plaid integration. We’ll cover technical steps, best practices, and reference features of Heron Data’s model that support these evaluations. By the end, you should be able to build a Heron-style underwriting assessment for an online education merchant using Plaid’s Assets reports.

## Using Plaid Assets Reports for Automated Underwriting

**Plaid Assets Report** provides a consolidated view of an applicant’s bank accounts – including account balances, ownership info, and up to 24 months of transactions – which is ideal for cash-flow underwriting ([Cash flow underwriting: 5 ways lenders can drive growth - Plaid](https://plaid.com/resources/lending/cash-flow-underwriting/#:~:text=Cash%20flow%20underwriting%3A%205%20ways,denial%20decision%20on%20a%20loan)). Heron Data integrates with Plaid in two ways: either via a direct Plaid API hookup (for real-time updates) or by accepting Plaid’s generated reports. In fact, if a client doesn’t use Heron’s direct integration, Heron allows them to **upload the Plaid Assets JSON report directly** to Heron’s API ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=3,from%20your%20system%2C%20you%20can)). Once uploaded, Heron’s system translates the Plaid data into its internal format and begins analyzing the transactions.

Using the Plaid Assets report as input has several advantages for underwriting: 

- **Comprehensive data capture:** The report includes all linked accounts and their transaction history over a specified period, giving a broad financial picture in one package. This is crucial for a holistic risk assessment – for example, seeing both the main checking account and a reserve savings account.
- **Up-to-date balances:** Plaid provides current and historical balances. Heron’s platform uses this to assess liquidity (more on that later) and to ensure the data is current (flagging if data is stale). Plaid’s Assets product is commonly used for *“providing a broader financial picture as part of traditional loan underwriting and asset verification”*, according to Plaid’s documentation ([Cash flow underwriting: 5 ways lenders can drive growth - Plaid](https://plaid.com/resources/lending/cash-flow-underwriting/#:~:text=Cash%20flow%20underwriting%3A%205%20ways,denial%20decision%20on%20a%20loan)).
- **Automated ingestion:** Instead of manually collecting PDF bank statements, the Plaid integration feeds digital data directly into the underwriting model. Heron’s clients see a huge efficiency gain here. For instance, *prior to automation, underwriters would manually sift through statements to find deposits and identify non-income entries; now this is done within minutes* ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Before%20Heron%2C%20underwriters%20at%20FBF,moved%20to%20the%20%E2%80%98decline%E2%80%99%20stage)). The tedious work of transcribing data is eliminated, reducing errors and freeing up underwriters to focus on analysis.

In practice, you would first use your Plaid integration to generate an Asset Report for the merchant. This involves calling Plaid’s `/asset_report/create` endpoint (including all relevant account tokens) and then retrieving the report JSON. With that data in hand, you can feed it into your analysis pipeline (just as Heron feeds it into their enrichment engine). Ensure that **all significant business accounts are included** in the Plaid report – if the merchant uses multiple bank accounts (e.g. one for operating expenses, one for revenue deposits), include them all. Heron’s system performs data quality checks at this stage, verifying that all expected data sources, accounts, and transactions have been captured ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,Revenue%2C%20P%26L%2C%20risk%20flags%20and)). You should similarly verify that the data covers the needed time frame (e.g. at least the last 12 months of activity) and that there are no gaps. Once the raw Plaid data is ready, the next step is to **enrich and analyze the transactions** along key underwriting dimensions.

## Cash Flow Analysis: Categorizing Income and Expenses

The foundation of cash-flow underwriting is understanding the **business’s incoming vs. outgoing cash** and the reliability of those cash flows. Heron Data tackles this by categorizing every transaction into standardized buckets and then computing cash flow metrics. To replicate this, you will need to transform the Plaid transaction data into meaningful categories and summaries.

**1. Identify and Label Revenue Transactions:** Distinguish true business revenue from other deposits. For a professional development merchant, revenue typically comes from course sales or consulting fees, often via payment processors or platforms (e.g. Stripe, PayPal, Udemy payouts, etc.). Using Plaid data: look at all credit (positive) transactions and filter those that represent customer payments. This may involve checking the transaction’s description, Plaid’s `category` field, or known payor names. For example, deposits labeled with “Stripe”, “PayPal”, or a course platform name are likely **operating revenue**. In contrast, transfers from the owner’s personal account or a loan disbursement (e.g. “SBA EIDL”) would **not** be true revenue but rather non-operating funds. Heron’s system automatically makes this distinction – it finds all deposits and *“pulls out all of the non-income”* items ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Before%20Heron%2C%20underwriters%20at%20FBF,moved%20to%20the%20%E2%80%98decline%E2%80%99%20stage)), effectively isolating genuine revenue. Make sure to implement similar logic: tag each deposit as either “Business Income” or “Other” (with sub-tags like “Owner Contribution” or “Loan Proceeds” for clarity).

**2. Categorize Expense Outflows:** Next, break down where the money is going. Professional development businesses might have expenses such as advertising (marketing spend on Facebook/Google), software subscriptions (course platforms, video conferencing tools), contractor or employee payments, and general office expenses. Plaid’s transaction data includes categories (like “Marketing/Advertising” or “Software”) that can be a starting point. However, you may need to refine these for accuracy. For instance, an online ad payment might be categorized as “Business Services: Advertising” by Plaid – you can treat that as a marketing expense. Create broad expense categories that matter for underwriting, such as **Cost of Sales**, **Marketing**, **Payroll**, **Office/Administrative**, **Loan Repayments**, etc. (Loan and debt payments will be discussed more in the next section, but you should flag them here as well). Heron’s AI enrichment model uses machine learning to classify transactions at a granular level (they tout “state of the art ML” for this purpose ([Heron: Automate Your Document Heavy Work](https://www.herondata.io/#:~:text=Built%20around%20your%20business%20processes,%E2%80%94%20not%20a%20generic%20solution))), but for an in-house replication you can combine Plaid’s categories with your own rule-based overrides for known merchants or patterns.

**3. Compute Cash Flow Metrics:** Once income and expenses are labeled, aggregate the data to understand cash flow trends. Best practice is to analyze on a **monthly basis** (since most bills and business cycles are monthly). For each month in the analysis period (e.g. each of the last 12 months):
- **Total Revenue:** Sum of all transactions labeled as business income (sales).  
- **Total Expenses:** Sum of all outgoing transactions that are operating expenses (exclude any debt payments for now to get operating expense total).  
- **Net Operating Cash Flow:** Revenue minus operating expenses for the month. This indicates whether the business’s core operations are cashflow-positive or burning cash. Heron’s scorecard computes similar *“approximations of standard cashflow-based metrics like `Revenue` and `Net Operating Cashflow`”* ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=by%20the%20company%20we%20are,etc)).  
- **Trends and Consistency:** Check how these values change month-to-month. Is revenue growing, steady, or declining? Is it seasonal or volatile? An online course business might see **spikes in revenue** during course launch months and slower periods in between. If revenue is irregular, you might compute a trailing 3-month average to smooth it out. Consistent or rising revenue indicates stability, whereas wildly fluctuating income could signal higher risk. Also note any **negative cash flow months** (more expenses than income), as that will erode reserves over time.

It’s useful to visualize this data. Heron’s dashboard, for example, provides visual reports for **Deposits (income) and Withdrawals (expenses)** over time ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=4,button%20on%20the%20left)). You can replicate that by plotting monthly totals or running statistics. Look for patterns such as a **month-to-date shortfall** – Heron even calculates month-to-date revenue during an ongoing month for real-time insight ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Heron%E2%80%99s%20bank%20statement%20OCR%20%26,date%20calculations)). In your system, if the current month is partial, consider projecting whether the merchant is on track compared to prior months (though this is advanced, and Heron offers a forecasting API for such needs ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=Get%20forecast))).

In summary, the cash flow analysis should answer: **How much cash is the business generating? Is it sufficient to cover its operating costs? Is the trend improving or deteriorating?** By using Plaid data with proper categorization, you can emulate Heron’s ability to produce a clear breakdown of *true revenue vs. non-revenue deposits and net cash flow from operations* ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Heron%E2%80%99s%20bank%20statement%20OCR%20%26,date%20calculations)). This forms the basis for evaluating the merchant’s financial health.

## Evaluating Debt Servicing Capacity

Beyond basic profitability, underwriting must consider the **burden of existing debt** on the business. Debt servicing capacity refers to the company’s ability to comfortably repay its current obligations (and any new credit you extend) out of its cash flow. Heron Data’s model pays special attention to detecting **debt-related transactions** in the bank data – both inflows like loan disbursements and outflows like loan repayments. The goal is to assess if the merchant is already leveraged or “stacked” with advances, and how much of their cash flow is consumed by debt payments.

**1. Identify Outstanding Loans or Merchant Advances:** Scan the transactions for any indications of financing. On the inflow side, large one-time credits with descriptions that suggest loans (e.g. containing words like “Capital”, “Funding”, “Loan”, or known lender names) should be flagged. For example, a deposit labeled “Square Capital” or an ACH from “Kabbage” would indicate the merchant received financing. In Heron’s categorization, such transactions would likely be tagged as *“Debt Investment”* (i.e. money invested into the business via debt) ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=Heron%20Data%E2%80%99s%20main%20use%20case,give%20insights%20into%20the%20company)). On the outflow side, look for **recurring payments or large outflows** that could be loan repayments. Merchant cash advances often result in daily or weekly ACH debits by the lender; term loans might have a monthly ACH to the bank or financing company. If the course business has an SBA loan, you might see a monthly payment to “U.S. Small Business Administration” or similar. Heron’s system automatically compiles a *“list of all the MCAs”* (merchant cash advances) from the statements ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Before%20Heron%2C%20underwriters%20at%20FBF,moved%20to%20the%20%E2%80%98decline%E2%80%99%20stage)), which means identifying each distinct loan provider and how much is owed/being paid.

**2. Calculate Debt Service Metrics:** Once you’ve tagged debt-related transactions, calculate how much the business pays toward debt per month (debt service). For each identified loan or advance, determine the average **monthly payment amount**. For example, if there are daily debits of \$200 to a lender, that’s roughly \$4,000 per month in debt service. Sum all such payments to get **Total Monthly Debt Service**. Then, compare this with the cash flow metrics from the previous section:
- **Debt Service Coverage Ratio (DSCR):** A common measure is DSCR = (Operating Cash Flow) / (Debt Payments). Compute this for recent months or on average. If DSCR is well above 1 (say 1.5 or 2), the business is generating 1.5-2x the cash needed to cover debt—generally a good sign. If DSCR is below 1, the business isn’t generating enough cash each month to cover its current debts, a major red flag.
- **Debt as % of Revenue:** Another simple gauge – what portion of monthly revenue goes to debt payments. If a business makes \$10k a month and \$5k goes to loan repayments, that’s 50% of revenue, which is high. Heron’s scorecard includes a “Debt” section which notes the *“number, recency and amounts of recent debt investments and repayments”* ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,recent%20debt%20investments%20and%20repayments)). A recent large debt injection coupled with high repayment amounts would indicate the company has limited capacity to take on additional debt.

**3. Check for Loan Stacking and New Borrowing:** If your Plaid data covers a long period (say 12-18 months), examine if the merchant has taken on multiple loans in that time. **Loan stacking** is when a business accumulates several concurrent loans or advances, which greatly increases default risk. Heron specifically flags this behavior – their customers have *“avoided millions in losses”* by catching loan stacking via bank data ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=2,other%20previously%20unidentified%20risk%20factors)). In practical terms, if you see two different loan deposits around the same time or overlapping repayment schedules (e.g. paying two MCA providers at once), that’s stacking. It suggests the merchant might be desperate for cash or overleveraged. Incorporate that into your risk evaluation (e.g. require that existing positions be closed or subordinated before giving new credit). Also, if the Plaid report shows a very recent loan (within the last few weeks), be cautious – the merchant’s financial situation might have changed (they might have taken the loan to plug a hole, or their cash flows might now be encumbered by the new payments).

From a **technical implementation** standpoint, you can use pattern matching on transaction descriptions to detect debt transactions (maybe maintain a list of known lender names or keywords). You might also leverage Plaid’s `payment_meta` or `name` fields which sometimes indicate if a transaction is an ACH credit/debit versus a check, etc. Mark each potential debt transaction and group by counterparty to identify distinct loans. The output of this analysis should be a clear picture of:
- How many loans/advances the business currently has.
- How much they are paying per week/month on these debts.
- When those debts were taken (recency).
- Any signs of **stress** like increasing reliance on new loans or missed payments (a missed payment might show up as a reversed debit or extra fees).

Using these insights, you can assess if the merchant can handle additional debt. For example, if an online coaching business shows \$8,000/mo net cash flow and \$2,000 in debt payments, adding a new loan with \$1,000/mo payment would keep DSCR ~2 (still healthy). But if they already pay \$6,000 on debt, new credit would likely overstretch them. This data-driven debt capacity check is exactly what cash-flow underwriting enables, and how Heron-style models go beyond simplistic credit scores. Ensuring **debt servicing is manageable** is key to a sound underwriting decision.

## Analyzing Chargebacks and Refund Patterns

For businesses that take customer payments (especially via credit card), **refund and chargeback activity** can be an important risk indicator. High rates of refunds or chargebacks may signal product issues, dissatisfied customers, or even fraud – all of which can jeopardize future cash flow. In the context of an online course or mentoring business, you’ll want to look at whether students frequently request refunds for courses or if chargebacks occur due to disputes. These patterns will show up in the bank transactions and should be scrutinized.

**1. Detect Refund Transactions:** Refunds typically appear as **negative transactions (debits)** that correspond to prior sales. If a customer’s payment is returned, the money will flow out of the merchant’s account back to the customer (or the payment processor). In Plaid data, a refund might have a description indicating reversal or return. For example, if revenue comes via Stripe, a refund might appear as an ACH debit from Stripe (since Stripe might withdraw the refunded amount from the merchant’s balance). Look for keywords like “REFUND”, “REVERSAL”, or any transaction where the amount is negative and the counterparty is a payment platform or similar to the revenue counterparty. Also, consider the timing – a refund often occurs shortly after an initial sale. If you have transaction IDs or metadata (Plaid may provide an ID for related transactions), use them to link refunds to the original charge. In absence of direct links, pairing by similar amounts and dates can help (e.g. a \$200 sale followed by a \$200 debit a week later could be a refund).

**2. Identify Chargebacks or Dispute Fees:** Chargebacks (when a customer disputes a charge with their bank) not only reverse the payment but often incur an additional fee (e.g. \$15–\$25) charged by the payment processor to the merchant. These fees might show up as small debits labeled with the processor’s name and something like “Chargeback Fee”. A pattern of such fees is a clear red flag. Additionally, chargeback reversals might be processed differently than standard refunds, but to your bank feed they similarly result in a debit of the original amount. Scan for any **small, miscellaneous fees** from payment platforms or banks; if you find multiple, it could indicate multiple chargebacks.

**3. Measure Refund/Chargeback Rates:** Once you’ve flagged potential refunds/chargebacks, quantify their impact:
- **Refund count and volume:** How many refunds in the last 6-12 months? What total dollar amount does that represent? For context, calculate refund volume as a percentage of total revenue in the same period. If, say, \$5,000 was refunded out of \$100,000 sales in a year (5%), that might be acceptable. But if 20%+ of revenue is being refunded, that’s a major concern.
- **Chargeback incidents:** Even a few chargebacks can be problematic because payment processors may impose penalties or hold funds if chargeback ratios exceed certain thresholds (often around 1% of transactions for card networks). Note if any chargebacks occurred and the timeframe. A cluster of chargebacks could indicate a particularly problematic product launch or fraudulent buyers.

From an underwriting perspective, **consistent refund/chargeback issues will affect how much reliable revenue the business actually nets**. Heron Data’s platform likely folds extreme cases into risk flags (for example, a high refund ratio might indirectly reflect in lower net revenue or unusual withdrawal patterns). While Heron’s documentation doesn’t explicitly list a “refund” flag, the analyst can infer it when examining net cash flows. In your replication, consider implementing a rule-based flag: e.g. *“Refund Rate > X%”* or *“>Y chargebacks in last Z months”* triggers a warning. This can influence the underwriting decision – you might approve a loan but at a lower amount or higher reserve requirement if refund risk is high, or you might require the merchant to explain the reasons behind the refunds.

Technically, detecting refunds can be tricky because of netting (sometimes processors net out fees and refunds before depositing). The Plaid Asset Report gives individual transactions as they hit the bank. If Stripe nets fees, you will see only the net deposit, not a separate fee transaction for each sale. However, if a refund happens after the fact, it will usually appear as its own debit. So focus on those explicit negative transactions. You might also compare gross revenue vs. net deposits: if the merchant reports \$50k sales but only \$40k reached the bank, the \$10k difference could be fees and refunds – but you’d need additional info to separate those. When in doubt, you could ask the merchant for their processor reports. 

In summary, incorporate an analysis of **refund and chargeback patterns** into your model. A healthy online course business typically has low refund rates (assuming quality content and perhaps no “money-back guarantee” policy abuse). Elevated refund activity could reduce effective cash flow and signal risk, which should be factored into the underwriting outcome.

## Assessing Reserve Levels and Liquidity

Even a profitable business can run into trouble if it doesn’t maintain adequate cash reserves. As an underwriter, you should examine the **liquidity cushion** the merchant has – essentially, how much cash they keep on hand relative to their needs. Plaid’s Assets data is especially useful here, since it provides not only current balances but also historical balance snapshots for each account. Heron Data’s scorecard includes balance-related metrics and flags for low balances. We will emulate those by looking at several indicators of reserves and liquidity:

**1. Analyze Current Balances and Trends:** Start with the latest balances of all accounts. The Plaid Asset report’s `accounts` section will list the `current` balance for each account (checking, savings, etc.). Add them up (if multiple) to get a sense of the merchant’s total cash on hand. Then, examine `historical_balances` – Plaid typically provides daily balances over the past few months or key date balances. Look at the **ending balance of each month** in the analysis period. Is the cash balance generally growing, stable, or declining over time? For example, if the merchant had \$10,000 six months ago and now has \$15,000, they’ve been accumulating reserves (likely due to positive cash flow). If it dropped from \$10k to \$2k, they’ve been drawing down cash (a possible warning sign unless it was for a planned expense). Heron’s platform would incorporate this via balance statistics – they report *average, maximum, and minimum balances* over the period ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=by%20the%20company%20we%20are,etc)). You can calculate those as well:
   - **Average Balance:** The typical cash level the business maintains.
   - **Minimum Balance:** The lowest point the cash fell to (e.g. right before a big payment or right after a slow month).
   - **Maximum Balance:** The peak – sometimes not as important, but it shows if they ever had a big influx of cash.

Pay special attention to the **minimum balance**. If the minimum dipped very low (close to \$0 or even negative if the account went overdraft), that indicates periods of cash strain. Heron’s risk flags highlight *“distinct days with insufficient funds/overdraft fees”* ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=by%20the%20company%20we%20are,etc)). You can mimic this by checking if at any point the balance went below zero or if there are transactions indicating overdraft protection or NSF (non-sufficient funds) fees from the bank. Even without explicit fees, an extremely low balance (like \$50) suggests the business was one small expense away from bouncing payments.

**2. Calculate Liquidity Ratios:** A useful metric is **Months of Cash Runway**. This can be estimated as (current cash balance) / (average monthly expenses). For instance, if the business spends about \$5,000 a month and currently has \$15,000 in the bank, it has roughly 3 months of operating expenses in reserve. For a small business, having 2-3 months of cushion is decent; less than 1 month is risky. You might also compute **Quick Ratio** if other current assets/liabilities were known, but since we’re focused on bank data, the runway metric is straightforward and telling. Document what that runway is and whether it’s trending up or down (e.g. did their runway increase because they retained earnings, or did it shrink?).

Additionally, consider **reserve accounts**. Does the merchant have a savings account with a stable balance? Some businesses keep a reserve account separate from their operating account. If Plaid data shows a savings with a few months of expenses saved up, that’s a positive sign of financial prudence. On the contrary, if every account is nearly zero by month-end, the business is living “hand-to-mouth,” which is higher risk.

**3. Internal Transfers and Unlinked Accounts:** One tricky aspect is money movement between accounts. A merchant might regularly sweep excess cash from checking into a savings or personal account. If all accounts are linked via Plaid, you can see the full picture and just note transfers (they should cancel out in aggregate cash calculation). But if *not all accounts are provided*, you could see cash “disappear” via transfers. Heron’s scorecard addresses this with a data quality measure of *“what percentage of transactions (relative to revenue) appear to be going to an unconnected account”* ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,average%2C%20max%20and%20min%20balances)). Essentially, if a significant portion of money is leaving the checked accounts to some unknown destination, it suggests the borrower might have another account you haven’t seen (perhaps funneling profits elsewhere). In your analysis, watch for repetitive transfers out labeled like “Transfer to ...” or “Withdrawal” that don’t correspond to known expenses. If, say, 20% of revenue every month is transferred to an external account (not provided in Plaid), you should ask the merchant about it or require that account to be included for a full assessment. It could simply be the owner paying herself a salary or moving funds to a personal savings – which is fine, but from a lender’s perspective, that money is not available to repay a loan if needed.

**4. Reserve Requirements and Liquidity Risk:** If your underwriting policy includes requiring a minimum reserve, compare it to the merchant’s situation. For example, you might want borrowers to always maintain one installment payment in reserve. If the merchant currently has very little buffer, you might structure the financing to include a funded reserve or advise them to set aside some of the loan for cushion. Conversely, a healthy buffer might allow more flexible terms. Heron’s system would likely flag extremely low liquidity as a risk. In your replication, you could set a rule like: *flag if current balance < X% of average monthly revenue*, or if there were any overdrafts in last year. These are signs that the business could run into cash crunches.

To implement this analysis with Plaid data, you will rely on the `historical_balances` array for each account in the Asset report. Iterate through those balances:
- Derive daily or monthly stats,
- Find min/max,
- Count days below a threshold (e.g., how many days was balance < \$100 or negative),
- Identify dates of any extreme drops (to possibly correlate with events like large purchases or payouts).

Also parse the transactions for any “OVERDRAFT FEE” or “NSF fee” descriptions which indicate the bank charged them for bouncing something – another clear indicator of liquidity problems.

In short, the **reserve and liquidity evaluation** tells you how resilient the business is to shocks. An online course business with variable income should ideally have a few months of cash in reserve in case a launch underperforms or expenses spike. If the Plaid data shows they maintain a healthy average balance and no history of overdrafts, that’s a reassuring sign. If not, it doesn’t necessarily mean decline the loan, but you’d factor it into the structure (maybe a smaller loan or weekly remittances to match their cash flow pattern, etc.). By quantifying liquidity as Heron’s model does – via average/min balances and insufficient funds flags ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=by%20the%20company%20we%20are,etc)) – you add another layer of risk insight to your underwriting.

## Implementing the Underwriting Model Step-by-Step

Now that we’ve broken down the core analysis areas, let’s outline **how to implement this in practice using your Plaid integration**. This will resemble the flow that Heron Data’s platform automates behind the scenes, but you can build it in-house with some development effort:

1. **Gather Plaid Data:** Use the Plaid API to retrieve the Asset Report (or Transactions) for the merchant you’re underwriting. You mentioned you already have Plaid Assets integration, so this likely means you can programmatically request a report for a given Plaid Item (the merchant’s connected accounts). Ensure you request enough days of history (e.g., `days_requested: 365` for one year, or more if needed). Once ready, call `/asset_report/get` to fetch the report JSON. The result will include an array of accounts, each with balances and an array of transactions. *Technical note:* The Asset report might have a **large payload** if many transactions; be prepared to handle parsing. Also, make sure to handle the authentication and permissions as per Plaid’s guidelines (the merchant should have consented to share the data for underwriting purposes).

2. **Consolidate Accounts and Transactions:** Parse the JSON into a workable data structure. Combine transactions from all accounts into one list or database table, and annotate each transaction with its account (you might keep an ID for which account it came from). Also store the account balances history separately keyed by account. If the merchant has multiple accounts, you may want to analyze them both individually (e.g., the operating account vs. a savings account) and in aggregate. For example, when calculating total revenue, exclude transfers between the accounts to avoid double counting. If the Asset Report already nets out transfers (Plaid may classify internal transfers distinctly), use that to avoid confusion. At this stage, it’s wise to run some **data sanity checks** (just like Heron’s “Data Checks” step ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,Revenue%2C%20P%26L%2C%20risk%20flags%20and))): Did we get data for the expected number of accounts? Do the transactions cover recent months up to today (data freshness)? If something is missing (say, no transactions for last month), you may need to refresh the Plaid item or check if the account was disconnected.

3. **Enrich with Categories (Transaction Labeling):** This is the heart of the process – categorizing transactions as described in previous sections. Implement a function or set of rules to assign each transaction a category tag relevant to your underwriting analysis. You might define a schema like: `Income.Revenue`, `Income.NonRevenue`, `Expense.Operating`, `Expense.DebtPayment`, `Transfer.Internal`, etc. Use Plaid’s provided `category` and `transaction_type` as initial hints – for instance, Plaid might tag payroll or loan payments as “Transfer” types, which you then subdivide. You could also integrate a third-party enrichment service or library to get merchant names or better categorizations (Heron and others use AI for high accuracy, but you can start simple). The key categories to output are those we discussed: **Revenue**, **Various expense types**, **Loan/Debt payments**, **Refunds**, etc. For each transaction, also mark attributes like `amount` (credit or debit), `date`, and maybe create flags like `is_refund=True` if it matches your refund detection criteria. This enriched dataset will allow you to query, filter, and aggregate data by category easily.

4. **Compute Financial Metrics:** Using the enriched data, calculate a suite of metrics:
   - **Monthly P&L:** For each month, sum revenue, sum expenses (possibly break out into major categories), and compute net cash flow. Store these in a structure (e.g., a dictionary keyed by month, or a small data frame).
   - **Debt summary:** Total current debt payments per month (from all transactions labeled as debt service). Possibly estimate outstanding principal if you can infer it (e.g., if you see a loan deposit of \$50k six months ago and fixed monthly payments of \$1k, one could guess roughly how much remains, but that’s optional).
   - **Refund/chargeback count:** total number and amount of refunds in the past X months.
   - **Balance stats:** average and min balance over the period (and maybe per month as well to see if their low point is improving or worsening).
   - **Other flags:** count of overdraft/NSF incidents, percentage of funds transferred out to unknown destinations, any instances of ATM cash withdrawals (some underwriters consider frequent cash withdrawals as a risk flag since it could mean under-the-table transactions – Heron flags ATM withdrawals as well ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=by%20the%20company%20we%20are,average%2C%20max%20and%20min%20balances)), though for an online business this might not be applicable).

   It’s helpful to output these metrics in a clear report format. Heron’s platform generates a **Scorecard** with many of these figures for quick review ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,based%20metrics%20like)). You might design your own summary report or dashboard that lists:
   - *Revenue:* e.g. “Last 12 months revenue: \$120k (avg \$10k/mo), trend +5% last quarter.”  
   - *Expenses:* “Avg monthly expenses: \$8k (incl. \$2k marketing, \$3k payroll, \$1k software... etc).”  
   - *Profitability:* “Net cash flow: +\$2k/mo average, 10 of 12 months positive.”  
   - *Debt:* “2 loans outstanding, \$3,000/mo total payments, next completion Aug 2024.”  
   - *Refunds:* “\$4,000 refunded of \$100k sales in 12 months (4%). 2 chargebacks noted with \$15 fees each.”  
   - *Liquidity:* “Current cash \$15k across accounts (min \$2k, avg \$8k over last year). No overdrafts recorded. ~2 months of expenses in reserve.”  
   - *Other Flags:* e.g. “Potential missing account: ~15% of revenue transferred to external account not in report.” or “Frequent cash withdrawals observed” if it were the case.

   By enumerating these points, you create an **underwriting narrative** similar to what an analyst would write, but backed by actual data. It’s essentially what Heron automates – providing a *“clear picture of revenue, [debt] positions, and legitimacy of the file within minutes”* ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=All%20systems%20operational)).

5. **Evaluate and Decide:** Finally, use these metrics to make an underwriting decision or risk score. Depending on your needs, this could be a manual review (the underwriter reads the report and decides) or you could develop a scoring model. For example, you might assign a numeric score to each dimension (cash flow, debt burden, etc.) and combine them. Heron Data mentions a **Heron Score** elsewhere, which likely compresses the analysis into a single risk grade for convenience. You can create your own scoring rubric: e.g., score 1-5 for cash flow stability, 1-5 for liquidity, etc., and see where the applicant falls. At minimum, set thresholds or policy rules: e.g., *Decline if any month in last 3 had negative balance or if refund rate > 15%*, or *Approve up to \$X if average DSCR > 1.2*. The exact criteria will depend on your risk appetite. Because you’re focusing on professional development businesses, you might also incorporate qualitative context: for instance, if the data shows a big revenue upswing in the last 2 months, is it due to a successful new course? If yes, maybe you are more lenient despite prior volatility. Always tie back to the data: you have objective numbers to justify the decision (this is great for compliance and fairness).

6. **Ongoing Monitoring (Optional):** Heron’s integration with Plaid allows **ongoing portfolio monitoring**, meaning after the initial underwriting, they continue to fetch transactions via Plaid webhooks to watch for changes in the borrower’s finances ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=2,without%20any%20manual%20intervention%20required)). You can do the same if desired: keep the Plaid Item live and set up webhooks or periodic pulls. This would let you see if, for example, the merchant’s revenue suddenly drops or if they take on a new loan, so you can intervene or adjust the credit line. For an online course business, you might specifically monitor for sustained revenue decline or a sudden surge in refunds as early warning indicators.

**Technical considerations:** Be mindful of data security and privacy. Bank transaction data is sensitive, so secure storage (or even avoiding storing raw descriptions if not needed) is important. Also, manage Plaid API errors or edge cases (such as accounts that don’t have data for the full period, or duplicate transactions – Plaid sometimes flags corrections which Heron’s docs mention ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=1.%20For%20the%20,Heron%20before%2C%20skip%20this%20step)) ([Heron: Automate Your Document Heavy Work](https://www.herondata.io/#:~:text=From%20Data%20Entry%20to%20Full,Underwrite%3A%20Speeding%20up%20MCA%20Funders))). Implementing idempotency or duplicate checks ensures you don’t double-count if you refresh data.

By following these steps, you essentially recreate the core of Heron Data’s underwriting analytics within your own system. You start with the **Plaid Asset report as the fuel**, then apply **Heron-inspired processing**: categorization, aggregation, and risk factor extraction. The result is a comprehensive financial profile of the merchant that addresses all four dimensions you cared about:
- **Cash flow health:** are they earning more than they spend?
- **Debt load:** are they free to take on new obligations or already straining?
- **Refund/chargeback behavior:** is their revenue real and sustainable, or eroded by returns?
- **Liquidity cushion:** do they have buffers to handle variability and unforeseen expenses?

Each of these factors can be directly supported by data (with Heron’s approach, there’s little guessing). And importantly, they are interconnected. For example, if cash flow is marginal **and** the merchant has high debt payments, that’s far riskier than just one of those in isolation. So in your final risk assessment, consider the holistic picture.

## Best Practices and Heron Data Insights

To ensure your underwriting model remains robust and efficient, keep in mind some best practices (many of which are embodied in Heron’s platform features):

- **Data Quality is Crucial:** Your analysis is only as good as the data you have. Always confirm you’ve got the complete and up-to-date set of accounts. If something looks off (e.g., no rent expense at all – maybe they pay from a different account), investigate. Heron’s system includes data quality checks for sources, accounts, and transaction coverage ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,Revenue%2C%20P%26L%2C%20risk%20flags%20and)) – you should adopt a similar discipline. Involve the merchant if needed: ask if all business accounts were connected, and if not, get those linked to Plaid for a full picture.

- **Consistency in Categorization:** As you refine your categorization rules or model, keep them consistent so that metrics aren’t skewed by changing definitions. Heron likely uses a fixed taxonomy of categories and provides a mapping (they even allow retrieving category definitions via API) to keep interpretations uniform. Document your category definitions (e.g., what counts as “Revenue” vs “Other Income”) so that anyone reviewing the analysis understands the terms.

- **Use Benchmarks and Context:** One advantage of a tool like Heron is that with many companies analyzed, one can benchmark metrics (e.g., how does this merchant’s 10% refund rate compare to industry averages?). If you have data on other similar businesses, use it for context. Perhaps most online course businesses have 5-10% refunds; if your applicant has 20%, that stands out. Or if median cash reserve is 1 month and they have 3 months, that’s a plus. Even if you don’t have a broad dataset initially, over time collect these stats to inform your decisions. Heron’s tagline about *“understand and benchmark a company in seconds with Heron’s Scorecard”* suggests they provide benchmarking in their output, which can greatly aid risk evaluation.

- **Feedback Loop and Model Improvement:** After you make decisions (approve/deny or set certain terms), track the outcomes. If a merchant you approved later defaulted, review their Plaid-derived metrics to see if there were warning signs you should weight more next time. Conversely, if you declined someone who turned out to be fine (maybe they went to another funder and succeeded), figure out if your model was too conservative. Heron mentions having *“automated feedback”* to improve their ML categorization ([Heron: Automate Your Document Heavy Work](https://www.herondata.io/#:~:text=Built%20around%20your%20business%20processes,%E2%80%94%20not%20a%20generic%20solution)) – you can similarly improve your decision model with experience. For instance, you might find that a certain pattern of declining balances is the strongest predictor of trouble, leading you to tighten policy on liquidity.

- **Operational Integration:** Make sure the process of getting the Plaid data and producing the analysis is streamlined. Heron’s solution integrates directly into lenders’ workflows (e.g., syncing results to their CRM in minutes ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Before%20Heron%2C%20underwriters%20at%20FBF,moved%20to%20the%20%E2%80%98decline%E2%80%99%20stage))). You should aim for something similar – perhaps automatically trigger the Plaid pull and analysis when an application comes in, and output a summary that an underwriter or credit committee can easily digest. This could be a PDF report or a dashboard view. Including visualizations (trends charts, etc.) can be very helpful for quick understanding. Don’t forget to log the raw data or keep the report for compliance, as you may need to show what data you based a decision on.

- **Security and Privacy Considerations:** Handle the Plaid credentials and retrieved data with care. Use Plaid’s recommended practices (don’t log sensitive data, encrypt stored data at rest, etc.). And when sharing the analysis internally, avoid exposing full account numbers or personal identifiers – focus on the financial metrics.

- **Extensibility:** As your business scales or if you underwrite other types of merchants, be ready to update your rules. For example, if you later work with e-commerce retailers, you might need to look at inventory purchases and chargebacks differently. The modular approach of categorizing and aggregating transactions will allow you to adjust to new patterns. Heron’s system was built to be adaptable across industries (they emphasize being *“built around your business processes — not a generic solution”* ([Heron: Automate Your Document Heavy Work](https://www.herondata.io/#:~:text=Focus%20on%20what%20really%20matters,so%20you%20don%E2%80%99t%20have%20to))), which is a good philosophy to emulate. Tailor the model to what matters for your specific niche (in your case, online education businesses).

By following these practices, you’ll maintain a high-quality underwriting model that closely mirrors what Heron Data provides to its clients. In essence, you become your own Heron – using Plaid’s raw data and layering on intelligence to turn bank transactions into a rich financial profile of the merchant.

## Conclusion

Underwriting merchants in the online course and mentoring space can be significantly improved with a cash flow data approach. By harnessing Plaid’s Assets reports and applying Heron Data’s methodology of transaction enrichment and analysis, you gain a nuanced view of an applicant’s financial health. We covered how to break down the bank data into **cash flow analysis**, revealing true revenue and expense trends, how to assess **debt servicing capacity** by identifying existing loans and computing coverage ratios, how to spot **chargeback or refund patterns** that might undercut revenue stability, and how to gauge **reserve levels and liquidity** to ensure the business isn’t one downturn away from default. Each of these dimensions is critical for a well-rounded underwriting decision.

Heron Data’s platform streamlines this process – providing labeled transactions, summary scorecards, and risk flags (like overdrafts or unexplained transfers) out-of-the-box ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=4,button%20on%20the%20left)) ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=,based%20metrics%20like)). By replicating these analyses in your own Plaid integration, you effectively recreate those insights for your underwriting team. The result should be faster, data-backed decisions: you can **approve strong applicants with confidence and spot risky applicants early**. As one Heron client noted, *“We now have a clear picture of revenue, positions, and the legitimacy of the file within minutes… [enabling] faster and larger high-conviction offers”* ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=All%20systems%20operational)). This is the kind of outcome you’re aiming for by implementing a similar model.

In practice, expect an initial setup phase where you build out the parsing and calculations, and then continuous refinement as you learn from each underwritten merchant. The good news is that Plaid provides reliable data and Heron’s approach gives a blueprint for what to do with it. With the detailed guide above, you can develop a technical and operational playbook for underwriting online education businesses (and potentially other SMBs) efficiently and accurately. By focusing on the data – cash flows, debt, refunds, liquidity – you ground your credit decisions in objective evidence, which should lead to better portfolio performance and a more scalable underwriting process.

**Sources:** The information and best practices above are informed by Heron Data’s documentation and case studies, Plaid’s product docs, and general underwriting principles. Key references include Heron Data’s quickstart guide on cash-flow underwriting ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=Heron%20Data%E2%80%99s%20main%20use%20case,give%20insights%20into%20the%20company)) ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=2,other%20previously%20unidentified%20risk%20factors)), which explains their transaction enrichment and risk flagging approach; Heron’s API and dashboard documentation illustrating how Plaid reports are ingested and turned into underwriting reports ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=3,a%20given%20end_user%20using%20the)) ([MCA/ Cash Flow Underwriting - Heron](https://docs.herondata.io/use-cases/smb-underwriting#:~:text=4,button%20on%20the%20left)); and a Heron case study demonstrating the identification of true revenue vs non-income and debt positions from bank statements ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Heron%E2%80%99s%20bank%20statement%20OCR%20%26,date%20calculations)) ([From Data Entry to Full Financial Underwrite: Speeding up MCA Funders](https://www.herondata.io/case-studies/from-data-entry-to-full-financial-underwrite-speeding-up-mca-funders#:~:text=Before%20Heron%2C%20underwriters%20at%20FBF,moved%20to%20the%20%E2%80%98decline%E2%80%99%20stage)). These, combined with Plaid’s insights on cash flow data ([Cash flow underwriting: 5 ways lenders can drive growth - Plaid](https://plaid.com/resources/lending/cash-flow-underwriting/#:~:text=Cash%20flow%20underwriting%3A%205%20ways,denial%20decision%20on%20a%20loan)), provide a solid foundation for building your own underwriting model.